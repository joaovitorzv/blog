{"pageProps":{"post":{"__typename":"Post","title":"Git Workflow em time","slug":"git-workflow-em-time","language":"pt-BR","description":"Commitar direto na main n√£o √© um problema quando voc√™ est√° desenvolvendo sozinho, por√©m, em um contexto onde existem outras pessoas trabalhando no mesmo projeto √© preciso seguir outro caminho...","date":"2021-11-23","coverImage":{"__typename":"Asset","url":"https://media.graphassets.com/b043Q3TbQGixY1ixCotB","width":1920,"height":1080,"handle":"b043Q3TbQGixY1ixCotB"},"coverImageAlt":"Git and Github ","content":{"__typename":"RichText","raw":{"children":[{"type":"paragraph","children":[{"text":"Commitar direto na "},{"code":true,"text":"main"},{"text":" n√£o √© um problema quando voc√™ est√° desenvolvendo sozinho, por√©m, em um contexto onde existem outras pessoas trabalhando no mesmo projeto √© preciso seguir outro caminho, esse caminho varia de acordo com o workflow que o time definiu mas n√£o √© algo t√£o distante do seguinte workflow"}]},{"type":"numbered-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Criar uma Branch (para cada task)"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Commit e Push"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Pull Request"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Solicitar Review"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Merge"}]}]}]},{"type":"paragraph","children":[{"text":"Vamos imaginar que voc√™ pegou uma task que adiciona um drop-down menu, como era o seu primeiro dia e voc√™ estava ansioso, ap√≥s escrever algumas linhas de c√≥digo percebeu que n√£o tinha criado a "},{"code":true,"text":"branch"},{"text":" para fazer essa task e ainda estava na "},{"code":true,"text":"main"},{"text":", nesse caso como ainda n√£o a criamos podemos cria-la e mudar"}]},{"type":"block-quote","children":[{"text":"Existem outros edge-cases para este caso (caso j√° tenha commitado as altera√ß√µes), se voc√™ quiser ir mais a fundo "},{"href":"https://stackoverflow.com/a/22055552/10846291","type":"link","children":[{"text":"neste link"}],"openInNewTab":true},{"text":" tem uma explica√ß√£o completa."}]},{"type":"paragraph","children":[{"text":"para criar a nova branch:"}]},{"type":"code-block","children":[{"text":"git branch new-drop-down"}]},{"type":"paragraph","children":[{"text":"e para trocar de branch:"}]},{"type":"code-block","children":[{"text":"git checkout new-drop-down\n\n// a palavra checkout pode confundir as vezes \n// o comando acima tamb√©m poderia ser assim:\ngit switch new-drop-down"}]},{"type":"paragraph","children":[{"text":"e se voc√™ quiser criar a branch e trocar de uma vez s√≥:"}]},{"type":"code-block","children":[{"text":"git checkout -b new-drop-down"}]},{"type":"paragraph","children":[{"text":"Pronto agora voc√™ j√° finalizou a task e precisa commitar, uma boa mensagem de commit precisa ser objetiva para que outras pessoas possam entender do que se trata aquele commit. Para deixar a mensagem bem leg√≠vel vamos formata-lo da seguinte maneira (pessoalmente eu mantenho tudo em ingl√™s):"}]},{"type":"code-block","children":[{"text":"<tipo>[escopo opcional]: <descri√ß√£o>\n"}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"tipos mais utilizados:"}]},{"type":"list-item-child","children":[{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"fix:"},{"text":" corrigir um bug"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"feat:"},{"text":" introduzir uma feature"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"chore:"},{"text":" altera√ß√µes em configura√ß√µes, ferramentas e altera√ß√µes em coisas que n√£o v√£o para produ√ß√£o (por exemplo uma altera√ß√£o no .gitignore)"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"docs:"}]},{"type":"list-item-child","children":[{"text":"¬†altera√ß√µes na documenta√ß√£o"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"style:"}]},{"type":"list-item-child","children":[{"text":" mudan√ßas que n√£o alteram o significado do c√≥digo (formata√ß√£o, ponto e virgula, etc)"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"refactor:"}]},{"type":"list-item-child","children":[{"text":"¬†c√≥digo refatorado"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"perf:"}]},{"type":"list-item-child","children":[{"text":" altera√ß√µes para melhoria de desempenho "}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"code":true,"text":"test:"},{"text":" esse √© bem auto-explicativo, testes"}]}]}]}]}]}]},{"type":"paragraph","children":[{"text":"com isso em mente podemos commitar a task que acabamos de fazer"}]},{"type":"code-block","children":[{"text":"git add .\n‚Å†git commit -m \"feat(header): new drop-down menu\"\n\n// ou se preferir fazer tudo de uma vez\n// usando a op√ß√£o -a significa -all a qual diz para o git \n// colocar em stage em todos arquivos modificados/deletados \n\n‚Å†git commit -a -m \"feat(header): new drop-down menu\""}]},{"type":"paragraph","children":[{"text":"depois de commitado √© so dar um "},{"code":true,"text":"push"}]},{"type":"code-block","children":[{"text":"git push origin new-drop-down\n\nEnumerating objects: 5, done.\nCounting objects: 100% (5/5), done.\nDelta compression using up to 2 threads\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 299 bytes | 299.00 KiB/s, done.\nTotal 3 (delta 2), reused 0 (delta 0)\nremote: Resolving deltas: 100% (2/2), completed with 2 local objects.\nremote: \nremote: Create a pull request for 'drop-down-menu' on GitHub by visiting:\nremote:      https://github.com/piedpiper/website/pull/new/drop-down-menu\nremote: \nTo github.com:joaovitorzv/.git\n * [new branch]      drop-down-menu -> drop-down-menu"}]},{"type":"paragraph","children":[{"text":"agora precisamos fazer o Pull Request, pessoalmente eu acho o nome que o Gitlab utiliza para se referir a 'Pull Request' bem mais intiutivo: "},{"bold":true,"text":"Merge Request"}]},{"type":"paragraph","children":[{"text":"podemos fazer da seguinte maneira"}]},{"type":"numbered-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Clicar no link que o git nos deu aqui em cimaüëÜ"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Ou no github ao abrir o resposit√≥rio que foi feito o push ter√° um bot√£o Compare & Pull Request\n‚Å†"}]},{"type":"list-item-child","children":[{"src":"https://media.graphcms.com/resize=,width:935,height:212/TAIwTRP4TfehZFIegxoy","type":"image","title":"pr.png","width":935,"handle":"TAIwTRP4TfehZFIegxoy","height":212,"altText":"Screenshot do bot√£o para fazer um Pull Request","children":[{"text":""}],"mimeType":"image/png"}]}]}]},{"type":"paragraph","children":[{"text":"ao clicar no bot√£o teremos que adicionar um Titulo e Descri√ß√£o descrevendo o que fizemos"}]},{"src":"https://media.graphcms.com/resize=,width:1242,height:409/Chxl0IDSQbCKk90xuDOh","type":"image","title":"TKJpqQ.png","width":1242,"handle":"Chxl0IDSQbCKk90xuDOh","height":409,"altText":"Screenshot Preenchendo o formul√°rio de um Pull Request","children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"na imagem acima logo ao lado direito mostra que precisamos de pelo menos 1 review aprovado para fazer o merge, basta clicar ali e selecionar algu√©m para fazer o review"}]},{"type":"block-quote","children":[{"text":"Se voc√™ precisar fazer altera√ß√µes no c√≥digo basta commitar na mesma branch e todos os commits ser√£o direcionados para esse PR."}]},{"type":"paragraph","children":[{"text":"ap√≥s o review ser aprovado voc√™ poder√° fazer o 'squash & merge' "}]},{"src":"https://media.graphcms.com/resize=,width:1472,height:732/T8QQ2AvhQzS3jMO2zduh","type":"image","title":"merge.jpeg","width":1472,"handle":"T8QQ2AvhQzS3jMO2zduh","height":732,"altText":"Screenshot Fazendo Merge and Squash","children":[{"text":""}],"mimeType":"image/jpeg"},{"type":"block-quote","children":[{"text":"Utilizar o squash √© como se pegassemos todos os commits que fizemos nesta branch e juntassemos em um s√≥, assim o hist√≥rico de PR's fica mais limpo e organizado."}]},{"type":"paragraph","children":[{"text":"depois de ter o merge feito vai aparecer uma op√ß√£o para deletar essa branch, podemos deletar pois o historico de todas altera√ß√µes/commits ficar√£o salvos nos closed PR's"}]},{"src":"https://media.graphcms.com/resize=,width:950,height:192/ovrdH0ERSJuPMRtGKTmG","type":"image","title":"C6mLqO.png","width":950,"handle":"ovrdH0ERSJuPMRtGKTmG","height":192,"altText":"Screenshot Deletando a Branch Merged","children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"voltando para o ambiente de desenvolvimento podemos trocar de branch para a main"}]},{"type":"code-block","children":[{"text":"git checkout main\n\n‚Å†Switched to branch 'main'\n‚Å†Your branch is up to date with 'origin/main'."}]},{"type":"paragraph","children":[{"text":"e puxar todas as altera√ß√µes que acabamos de fazer"}]},{"type":"code-block","children":[{"text":"git pull\n‚Å†\nremote: Enumerating objects: 5, done.\nremote: Counting objects: 100% (5/5), done.\nremote: Compressing objects: 100% (2/2), done.\nUnpacking objects: 100% (3/3), 662 bytes | 662.00 KiB/s, done.\nremote: Total 3 (delta 1), reused 1 (delta 0), pack-reused 0\nFrom github.com:piedpiper/website\n   f92d160..58fefeb  main       -> origin/main\nUpdating f92d160..58fefeb\nFast-forward\n index.html | 6 ++++--\n 1 file changed, 4 insertions(+), 2 deletions(-)\n"}]},{"type":"block-quote","children":[{"text":"Tl;dr\nVoc√™ pode ver acima que o git utilizou a estrat√©gia 'fast-forward' para fazer o merge no nosso reposit√≥rio local, se voc√™ gosta de saber o que est√° acontecendo por baixo dos panos, recomendo que leia "},{"href":"https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging","type":"link","children":[{"text":"esta parte da documenta√ß√£o do git"}],"openInNewTab":true},{"text":""}]},{"type":"paragraph","children":[{"text":"por fim tamb√©m podemos deletar a branch que trabalhamos no nosso reposit√≥rio local"}]},{"type":"code-block","children":[{"text":"git branch -D drop-down-menu\n\n‚Å†Deleted branch drop-down-menu (was f3a0df6)."}]},{"type":"paragraph","children":[{"text":""}]}]}},"tags":["git ","github","github workflow","github em time"]}},"__N_SSG":true}