<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro&amp;Zen+Antique+Soft&amp;family=IBM+Plex+Mono:wght@400;600&amp;display=swap"/><link rel="icon" href="/assets/blog-icon.ico"/><meta name="google-site-verification" content="BXyBgJEABD-lS0WS6u07BLfhlhHI8sT9TtYOH-VtkYs"/><meta name="google-site-verification" content="v91Ks9t_Nh0XGmwV8GKa5bH-96U4ZKw23VpZajlhi6Y"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:locale" content="pt_BR"/><meta property="og:site_name" content="@joaovitorzv • blog"/><title>Como resolver o Knight&#x27;s Tour Problem</title><meta name="author" content="https://github.com/joaovitorzv"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta property="og:title" content="Como resolver o Knight&#x27;s Tour Problem"/><meta property="og:description" content="O Knight&#x27;s Tour problem é um problema que se baseia em uma sequência de movimentos num tabuleiro de xadrez..."/><meta property="og:url" content="https://joaovitorzv.github.io/post/como-resolver-knight-tour-problem"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-11-16T03:00:00Z"/><meta property="article:modified_time" content="2021-11-16T03:00:00Z"/><meta property="article:expiration_time" content="2030-12-21T03:00:00Z"/><meta property="article:author" content="https://github.com/joaovitorzv"/><meta property="article:section" content="Technology"/><meta property="article:tag" content="Algoritmos"/><meta property="article:tag" content="Python"/><meta property="article:tag" content="Knight Tour Problem"/><meta property="article:tag" content="Chess"/><meta property="og:image" content="https://media.graphcms.com/resize=width:1920/NKeLOwyDRuicYjlaV6OQ"/><meta property="og:image:alt" content="chess knight"/><meta property="og:image:width" content="1920"/><meta property="og:image:height" content="1080"/><meta name="next-head-count" content="25"/><link rel="preload" href="/_next/static/css/8ef1a029e55eb01ee13c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8ef1a029e55eb01ee13c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/70928f28b827d8d7c7cc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/70928f28b827d8d7c7cc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-62b8caa3ccc47893b147.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9b1cb55190e2254cce63.js" defer=""></script><script src="/_next/static/chunks/879-2ffc48480b5021ed5834.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-51d6f32ed443566fe317.js" defer=""></script><script src="/_next/static/KZqfJ_7lOZ8v6R1GwVEd2/_buildManifest.js" defer=""></script><script src="/_next/static/KZqfJ_7lOZ8v6R1GwVEd2/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro&Zen+Antique+Soft&family=IBM+Plex+Mono:wght@400;600&display=swap">@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n5is.woff) format('woff')}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAO8lQ.woff) format('woff')}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeaiXA.woff) format('woff')}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n1iIq131nj-otFQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n1isq131nj-otFQ.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n1iAq131nj-otFQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n1iEq131nj-otFQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F63fjptAgt5VM-kVkqdyU8n1i8q131nj-o.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl1FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAOwlRFgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl9FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl5FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v12/-F6qfjptAgt5VM-kVkqdyU8n3vAOwlBFgsAXHNk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXk-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXA-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXc-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXs-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXo-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v15/neIQzD-0qpwxpaWvjeD0X88SAOeauXQ-oAGIyY0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="styles_container__1JLFF"><header class="Header_header__cwxka"><div class="Header_headerContent__1ipjG"><h1>() =&gt;  <button class="Header_hideLinksBtn__1mu8E">@joaovitorzv</button> <!-- -->blog.</h1></div><nav id="navigation" class=""><div class="Header_navContent__1ArmW"><div class="Header_links__bOZA0"><a href="/">Home</a><div class="Header_hiddenLink__2SCVW"><a class="Header_link__1GkhW" href="https://www.github.com/joaovitorzv" target="_blank" rel="noopener noreferrer">Github</a><svg fill="#374151" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14px" height="18px"><path d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 12 L 19 12 L 19 19 L 5 19 L 5 5 L 12 5 L 12 3 L 5 3 z M 14 3 L 14 5 L 17.585938 5 L 8.2929688 14.292969 L 9.7070312 15.707031 L 19 6.4140625 L 19 10 L 21 10 L 21 3 L 14 3 z"></path></svg></div><div class="Header_hiddenLink__2SCVW"><a class="Header_link__1GkhW" href="https://www.linkedin.com/in/jo%C3%A3o-vitor-veras-165045186/" target="_blank" rel="noopener noreferrer">LinkedIn</a><svg fill="#374151" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14px" height="18px"><path d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 12 L 19 12 L 19 19 L 5 19 L 5 5 L 12 5 L 12 3 L 5 3 z M 14 3 L 14 5 L 17.585938 5 L 8.2929688 14.292969 L 9.7070312 15.707031 L 19 6.4140625 L 19 10 L 21 10 L 21 3 L 14 3 z"></path></svg></div></div><div><select name="langs"><option selected="" value="all">All languages</option><option value="en-US">English</option><option value="pt-BR">Português</option></select></div></div></nav></header><div class="styles_pageContainer__HYV-w"><div class="styles_page__lKdv7"><section class="Post_postHeader__2HgFk"><div class="Post_postCover__1XkO7"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:66.66666666666666%"></div><img alt="peak of ice mountain" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="peak of ice mountain" sizes="100vw" srcSet="https://media.graphcms.com/resize=width:640/NKeLOwyDRuicYjlaV6OQ 640w, https://media.graphcms.com/resize=width:750/NKeLOwyDRuicYjlaV6OQ 750w, https://media.graphcms.com/resize=width:828/NKeLOwyDRuicYjlaV6OQ 828w, https://media.graphcms.com/resize=width:1080/NKeLOwyDRuicYjlaV6OQ 1080w, https://media.graphcms.com/resize=width:1200/NKeLOwyDRuicYjlaV6OQ 1200w, https://media.graphcms.com/resize=width:1920/NKeLOwyDRuicYjlaV6OQ 1920w, https://media.graphcms.com/resize=width:2048/NKeLOwyDRuicYjlaV6OQ 2048w, https://media.graphcms.com/resize=width:3840/NKeLOwyDRuicYjlaV6OQ 3840w" src="https://media.graphcms.com/resize=width:3840/NKeLOwyDRuicYjlaV6OQ" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><h2>Como resolver o Knight&#x27;s Tour Problem</h2><span>16 de novembro de 2021</span></section><article id="keep-reading" class="Post_content__3OniL"><p></p><p>O <b class="bold">Knight&#x27;s Tour problem</b> é um problema que se baseia em uma sequência de movimentos num tabuleiro de xadrez, os movimentos são feitos apenas pelo <i>Cavalo</i> (Knight) e seguindo as regras do xadrez o objetivo é fazer um &quot;Tour&quot;, ou seja, visitar todas as casas do tabuleiro, porém, só é permitido passar pelas casas apenas uma ÚNICA vez.</p><p>Existem várias maneiras de resolver esse problema algumas delas são:</p><ul><li class="li">Brute Force</li><li class="li">Algoritmos Divide-and-conquer</li><li class="li">Rede Neurais</li><li class="li">Warnsdorff&#x27;s Rule (Regra de Warnsdorff&#x27;s) </li></ul><p><b class="bold">Warnsdorff&#x27;s Rule</b> é uma heurística (procedimento que auto-descobre e aplica um método, sem a garantia de ser perfeito ou racional, mas que é suficiente para chegar a um resultado seja ele aproximado ou exato).</p><p>Imagine o seguinte cenário: Um tabuleiro padrão 8x8 e a posição inicial do <i>Cavalo</i> atribuída aleatoriamente, uma vez que estamos na posição inicial vamos olhar para todas as casas que o <i>Cavalo</i> pode se mover, partindo dessas casas disponíveis vamos olhar novamente ao redor do <i>Cavalo</i> e contar quantas casas temos disponíveis. A casa que tiver o menor número de futuras casas disponíveis (vamos chama-las de <i>Neighbors</i>) é a vencedora e o <i>Cavalo</i> se move até ela, faremos isso até o <i>Tour</i> ser finalizado;</p><div class="img"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzM1IiBoZWlnaHQ9IjMzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></div><img alt="Tabuleiro de xadrez" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Tabuleiro de xadrez" srcSet="https://media.graphcms.com/resize=width:384/a9Z1BlNS03Vkui7BdOwM 1x, https://media.graphcms.com/resize=width:750/a9Z1BlNS03Vkui7BdOwM 2x" src="https://media.graphcms.com/resize=width:750/a9Z1BlNS03Vkui7BdOwM" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><p>O nosso tabuleiro será representado por um Array 2D, se quiséssemos posicionar o <i>Cavalo</i> igual na imagem acima (na casa B4) em um Array 2D, seria assim <code class="inlineHighlight">board[4][1]</code>. Como você pode ver temos o Array <code class="inlineHighlight">board</code> com 8 Arrays representando o eixo X e cada Array com 8 elementos representando o eixo Y.</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">board = [[-1 for i in range(n)]for j in range(n)]</code></pre><p>Iniciamos todas as casas do tabuleiro com o valor -1 assim fica fácil na hora de saber se o <i>Cavalo</i> ja passou ou por aquela casa.</p><p>No xadrez o <i>Cavalo</i> faz um movimento em L e para representar isso no nosso código vamos utilizar 2 arrays <code class="inlineHighlight">moves_x = []</code> e <code class="inlineHighlight">moves_y = []</code> neles teremos todos os possíveis movimentos que o <i>Cavalo</i> pode fazer</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">moves_x = [-2, -2, -1, -1, 2, 2, 1, 1]
moves_y = [-1, 1, -2, 2, -1, 1, -2, 2]</code></pre><p>esses números parecem aleatórios e podem soar um pouco confuso, mas calma... tudo fará sentindo.</p><div class="img"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE2OCIgaGVpZ2h0PSIxMTY2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></div><img alt="Exemplo de como é feito os movimentos no tabuleiro de xadrez" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Exemplo de como é feito os movimentos no tabuleiro de xadrez" srcSet="https://media.graphcms.com/resize=width:1200/E5Zf0O49QM6E9BYtqqOc 1x, https://media.graphcms.com/resize=width:3840/E5Zf0O49QM6E9BYtqqOc 2x" src="https://media.graphcms.com/resize=width:3840/E5Zf0O49QM6E9BYtqqOc" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><p>Na ilustração acima fica bem fácil de entender nela temos todos os movimentos em L possíveis, também está destacado em verde o movimento do <i>Cavalo</i> para a casa C7. Todos os movimentos são formados pelo cálculo dos valores <code class="inlineHighlight">moves_x</code> e <code class="inlineHighlight">moves_y</code> sobre os valores <b class="bold">X</b> e <b class="bold">Y</b> da casa que o <i>Cavalo</i> estiver. Por exemplo para mover da casa D5 (<code class="inlineHighlight">board[3][3]</code>) para a C7 teriamos: X = <code class="inlineHighlight">3 - 2</code>, Y = <code class="inlineHighlight">3 - 1</code> pronto agora já temos nossa nova posição <code class="inlineHighlight">board[1][2]</code></p><p>Contudo o movimento que fizemos acima só foi válido porquê o cavalo está no centro do tabuleiro, se o <i>Cavalo</i> estiver nas bordas o tabuleiro &quot;acaba&quot; ou se já tivesse passado pela casa C7 não poderiamos passar por lá novamente, para verificar isso utilizaremos a seguinte função que recebe <code class="inlineHighlight">next_move</code> (o resultado do cálculo dos <code class="inlineHighlight">moves</code> sobre o valor <i>X</i>, <i>Y</i> da posição atual), sendo esse um possível movimento valido e também vamos receber o <code class="inlineHighlight">board</code></p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def validMove(next_move_x, next_move_y, board):
    if (not next_move_x &lt; 0 and not next_move_y &lt; 0 and next_move_x &lt; n and next_move_y &lt; n and board[next_move_x][next_move_y] == -1):
        return True
    return False</code></pre><p>Tanto no eixo <b class="bold">X</b> ou <b class="bold">Y</b> caso o <i>Cavalo</i> tente fazer um movimento que ultrapasse o limite do tabuleiro o resultado do calculo será negativo e falhara na verificação acima, se esse movimento for feito na borda da direita ou para baixo o resultado será maior que o tamanho do tabueleiro; <code class="inlineHighlight">n</code> representa o tamanho do tabuleiro (8)</p><p><code class="inlineHighlight">solveKnight()</code> é a nossa função principal</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def solveKnight():
    moves_x = [-2, -2, -1, -1, 2, 2, 1, 1]
    moves_y = [-1, 1, -2, 2, -1, 1, -2, 2]

    board = [[-1 for i in range(n)]for j in range(n)]

    # posição inicial aleatoria
    starting_pos_x = random.randint(0, 7)
    starting_pos_y = random.randint(0, 7)

    # começar a contagem de tours 
    # e definir que já passamos por essa posição
    tour = 1
    board[starting_pos_x][starting_pos_y] = 1

    # procurar os próximos movimentos
    findNextMove(moves_x, moves_y, starting_pos_x, starting_pos_y, tour, board, 8)
    return printBoard(n, board)</code></pre><p>aqui chamamos a função <code class="inlineHighlight">findNextMove()</code></p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def findNextMove(moves_x, moves_y, curr_pos_x, curr_pos_y, tour, board, neighbors_availability):
    if (tour == 8 ** 2):
        return True

    next_move_x = None
    next_move_y = None

    # andar pelo board  
    for i in range(8):
        new_move_x = curr_pos_x + moves_x[i]
        new_move_y = curr_pos_y + moves_y[i]

        if (validMove(new_move_x, new_move_y, board)):
            # contar quantos neighbors estão disponíveis
            neighbors_available = countNeighbors(new_move_x, new_move_y, moves_x, moves_y, board)
            if (neighbors_available &lt; neighbors_availability):
                neighbors_availability = neighbors_available
                next_move_x = new_move_x
                next_move_y = new_move_y

    tour += 1
    board[next_move_x][next_move_y] = tour

    return findNextMove(moves_x, moves_y, next_move_x, next_move_y, tour, board, 8)</code></pre><p>O cavalo já tem sua posição inicial e agora ele precisa começar a andar e para encontrar a próxima casa vamos definir temporariamente um <code class="inlineHighlight">new_move</code> que será um possível movimento válido, a partir deste <code class="inlineHighlight">new_move</code> vamos contar quantas outras possíveis casa diponíveis (<code class="inlineHighlight">neighbors</code>) existem, o <code class="inlineHighlight">new_move</code> que tiver o menor número de <code class="inlineHighlight">neighbors</code> passa a ser o <code class="inlineHighlight">next_move</code></p><p>Precisamos fazer isso até o <i>Cavalo</i> visitar todas as casas, para isso o retorno desta função será ela mesma, tornando-a recursiva. A cada movimento válido que o <i>Cavalo</i> faz estamos adicionando <code class="inlineHighlight">+1</code> na variável <code class="inlineHighlight">tour</code>, quando o seu total for igual a <code class="inlineHighlight">8 ** 2</code> (64) que é o total de casas que existem no nosso tabuleiro saberemos que o Tour foi completo</p><p>para contar os neighbors faremos o seguinte</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def countNeighbors(new_move_x, new_move_y, moves_x, moves_y, board):
    neighbors = 0

    for i in range(8):
        neighbor_x = new_move_x + moves_x[i]
        neighbor_y = new_move_y + moves_y[i]

        if (validMove(neighbor_x, neighbor_y, board)):
            if (validNeighbor(neighbor_x, neighbor_y, new_move_x, new_move_y)):
                neighbors += 1

    return neighbors</code></pre><p>Iteramos por todos os <code class="inlineHighlight">moves</code> válidos, como estamos manipulando o <code class="inlineHighlight">new_move</code> que é uma posição temporária apenas para contar quantos <code class="inlineHighlight">neighbors</code> disponíveis existem não podemos contar a casa que o cavalo realmente está, e esse é o papel do <code class="inlineHighlight">validNeighbor()</code></p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def validNeighbor(neighbor_x, neighbor_y, new_move_x, new_move_y):
    if (neighbor_x != new_move_x and neighbor_y != new_move_y):
        return True 
    return False</code></pre><p>Todos os movimentos que passarem são contados e retornados pela função <code class="inlineHighlight">countNeighbors()</code>.</p><p>Agora que o <i>Cavalo</i> já passou por todas as 64 casas precisamos printar na tela todo o caminho feito por ele</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">def printBoard(n, board):
    for i in range(n):
        for j in range(n):
            print(board[i][j], end=&#x27; &#x27;)
        print()</code></pre><p>Para printar tudo isso iteramos pelo <code class="inlineHighlight">board</code> e para cada elemento do eixo <b class="bold">X</b> printamos com o parametro <code class="inlineHighlight">end=&#x27; &#x27;</code>, porquê o python por padrão cria uma nova linha e o resultado que esperamos é que fiquem um ao lado do outro, assim:</p><pre class="blockHighlight" style="font-size:14px"><code class="language-jsx">5 20 3 26 7 22 31 36 
2 27 6 21 30 37 8 23 
19 4 29 50 25 32 35 38 
28 1 48 33 56 51 24 9 
45 18 57 62 49 34 39 52 
60 63 44 47 42 55 10 13 
17 46 61 58 15 12 53 40 
64 59 16 43 54 41 14 11 </code></pre><p>esse é o caminho feito pelo <i>Cavalo</i> em um tabuleiro de 8x8.</p><p>você pode acessar o código completo <a href="https://gist.github.com/joaovitorzv/20898d0e9f781a731a111cf3d9ff3615">neste gist</a></p><p></p></article><div class="Post_postFooter__22Xrw"><a href="/">Voltar</a></div></div></div><footer class="Footer_footer__3zUfD"><p>© <span>new Date().getFullYear() </span> by João Vitor Veras O.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"__typename":"Post","title":"Como resolver o Knight's Tour Problem","slug":"como-resolver-knight-tour-problem","language":"pt-BR","description":"O Knight's Tour problem é um problema que se baseia em uma sequência de movimentos num tabuleiro de xadrez...","date":"2021-11-16","coverImage":{"__typename":"Asset","url":"https://media.graphassets.com/NKeLOwyDRuicYjlaV6OQ","width":612,"height":408,"handle":"NKeLOwyDRuicYjlaV6OQ"},"coverImageAlt":"chess knight","content":{"__typename":"RichText","raw":{"children":[{"type":"paragraph","children":[{"text":""}]},{"type":"paragraph","children":[{"text":"O "},{"bold":true,"text":"Knight's Tour problem"},{"text":" é um problema que se baseia em uma sequência de movimentos num tabuleiro de xadrez, os movimentos são feitos apenas pelo "},{"text":"Cavalo","italic":true},{"text":" (Knight) e seguindo as regras do xadrez o objetivo é fazer um \"Tour\", ou seja, visitar todas as casas do tabuleiro, porém, só é permitido passar pelas casas apenas uma ÚNICA vez."}]},{"type":"paragraph","children":[{"text":"Existem várias maneiras de resolver esse problema algumas delas são:"}]},{"type":"bulleted-list","children":[{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Brute Force"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Algoritmos Divide-and-conquer"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Rede Neurais"}]}]},{"type":"list-item","children":[{"type":"list-item-child","children":[{"text":"Warnsdorff's Rule (Regra de Warnsdorff's) "}]}]}]},{"type":"paragraph","children":[{"bold":true,"text":"Warnsdorff's Rule"},{"text":" é uma heurística (procedimento que auto-descobre e aplica um método, sem a garantia de ser perfeito ou racional, mas que é suficiente para chegar a um resultado seja ele aproximado ou exato)."}]},{"type":"paragraph","children":[{"text":"Imagine o seguinte cenário: Um tabuleiro padrão 8x8 e a posição inicial do "},{"text":"Cavalo","italic":true},{"text":" atribuída aleatoriamente, uma vez que estamos na posição inicial vamos olhar para todas as casas que o "},{"text":"Cavalo","italic":true},{"text":" pode se mover, partindo dessas casas disponíveis vamos olhar novamente ao redor do "},{"text":"Cavalo","italic":true},{"text":" e contar quantas casas temos disponíveis. A casa que tiver o menor número de futuras casas disponíveis (vamos chama-las de "},{"text":"Neighbors","italic":true},{"text":") é a vencedora e o "},{"text":"Cavalo","italic":true},{"text":" se move até ela, faremos isso até o "},{"text":"Tour","italic":true},{"text":" ser finalizado;"}]},{"src":"https://media.graphcms.com/resize=,width:335,height:338/a9Z1BlNS03Vkui7BdOwM","type":"image","title":"board.png","width":335,"handle":"a9Z1BlNS03Vkui7BdOwM","height":338,"altText":"Tabuleiro de xadrez","children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"O nosso tabuleiro será representado por um Array 2D, se quiséssemos posicionar o "},{"text":"Cavalo","italic":true},{"text":" igual na imagem acima (na casa B4) em um Array 2D, seria assim "},{"code":true,"text":"board[4][1]"},{"text":". Como você pode ver temos o Array "},{"code":true,"text":"board"},{"text":" com 8 Arrays representando o eixo X e cada Array com 8 elementos representando o eixo Y."}]},{"type":"code-block","children":[{"text":"$python$\nboard = [[-1 for i in range(n)]for j in range(n)]"}]},{"type":"paragraph","children":[{"text":"Iniciamos todas as casas do tabuleiro com o valor -1 assim fica fácil na hora de saber se o "},{"text":"Cavalo","italic":true},{"text":" ja passou ou por aquela casa."}]},{"type":"paragraph","children":[{"text":"No xadrez o "},{"text":"Cavalo","italic":true},{"text":" faz um movimento em L e para representar isso no nosso código vamos utilizar 2 arrays "},{"code":true,"text":"moves_x = []"},{"text":" e "},{"code":true,"text":"moves_y = []"},{"text":" neles teremos todos os possíveis movimentos que o "},{"text":"Cavalo","italic":true},{"text":" pode fazer"}]},{"type":"code-block","children":[{"text":"$python$\nmoves_x = [-2, -2, -1, -1, 2, 2, 1, 1]\nmoves_y = [-1, 1, -2, 2, -1, 1, -2, 2]"}]},{"type":"paragraph","children":[{"text":"esses números parecem aleatórios e podem soar um pouco confuso, mas calma... tudo fará sentindo."}]},{"src":"https://media.graphcms.com/resize=,width:1168,height:1166/E5Zf0O49QM6E9BYtqqOc","type":"image","title":"exemplo-moves.png","width":1168,"handle":"E5Zf0O49QM6E9BYtqqOc","height":1166,"altText":"Exemplo de como é feito os movimentos no tabuleiro de xadrez","children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"Na ilustração acima fica bem fácil de entender nela temos todos os movimentos em L possíveis, também está destacado em verde o movimento do "},{"text":"Cavalo","italic":true},{"text":" para a casa C7. Todos os movimentos são formados pelo cálculo dos valores "},{"code":true,"text":"moves_x"},{"text":" e "},{"code":true,"text":"moves_y"},{"text":" sobre os valores "},{"bold":true,"text":"X"},{"text":" e "},{"bold":true,"text":"Y"},{"text":" da casa que o "},{"text":"Cavalo","italic":true},{"text":" estiver. Por exemplo para mover da casa D5 ("},{"code":true,"text":"board[3][3]"},{"text":") para a C7 teriamos: X = "},{"code":true,"text":"3 - 2"},{"text":", Y = "},{"code":true,"text":"3 - 1"},{"text":" pronto agora já temos nossa nova posição "},{"code":true,"text":"board[1][2]"}]},{"type":"paragraph","children":[{"text":"Contudo o movimento que fizemos acima só foi válido porquê o cavalo está no centro do tabuleiro, se o "},{"text":"Cavalo","italic":true},{"text":" estiver nas bordas o tabuleiro \"acaba\" ou se já tivesse passado pela casa C7 não poderiamos passar por lá novamente, para verificar isso utilizaremos a seguinte função que recebe "},{"code":true,"text":"next_move"},{"text":" (o resultado do cálculo dos "},{"code":true,"text":"moves"},{"text":" sobre o valor "},{"text":"X","italic":true},{"text":", "},{"text":"Y","italic":true},{"text":" da posição atual), sendo esse um possível movimento valido e também vamos receber o "},{"code":true,"text":"board"}]},{"type":"code-block","children":[{"text":"$python$\ndef validMove(next_move_x, next_move_y, board):\n    if (not next_move_x \u003c 0 and not next_move_y \u003c 0 and next_move_x \u003c n and next_move_y \u003c n and board[next_move_x][next_move_y] == -1):\n        return True\n    return False"}]},{"type":"paragraph","children":[{"text":"Tanto no eixo "},{"bold":true,"text":"X"},{"text":" ou "},{"bold":true,"text":"Y"},{"text":" caso o "},{"text":"Cavalo","italic":true},{"text":" tente fazer um movimento que ultrapasse o limite do tabuleiro o resultado do calculo será negativo e falhara na verificação acima, se esse movimento for feito na borda da direita ou para baixo o resultado será maior que o tamanho do tabueleiro; "},{"code":true,"text":"n"},{"text":" representa o tamanho do tabuleiro (8)"}]},{"type":"paragraph","children":[{"code":true,"text":"solveKnight()"},{"text":" é a nossa função principal"}]},{"type":"code-block","children":[{"text":"$python$\ndef solveKnight():\n    moves_x = [-2, -2, -1, -1, 2, 2, 1, 1]\n    moves_y = [-1, 1, -2, 2, -1, 1, -2, 2]\n\n    board = [[-1 for i in range(n)]for j in range(n)]\n\n    # posição inicial aleatoria\n    starting_pos_x = random.randint(0, 7)\n    starting_pos_y = random.randint(0, 7)\n\n    # começar a contagem de tours \n    # e definir que já passamos por essa posição\n    tour = 1\n    board[starting_pos_x][starting_pos_y] = 1\n\n    # procurar os próximos movimentos\n    findNextMove(moves_x, moves_y, starting_pos_x, starting_pos_y, tour, board, 8)\n    return printBoard(n, board)"}]},{"type":"paragraph","children":[{"text":"aqui chamamos a função "},{"code":true,"text":"findNextMove()"}]},{"type":"code-block","children":[{"text":"$python$\ndef findNextMove(moves_x, moves_y, curr_pos_x, curr_pos_y, tour, board, neighbors_availability):\n    if (tour == 8 ** 2):\n        return True\n\n    next_move_x = None\n    next_move_y = None\n\n    # andar pelo board  \n    for i in range(8):\n        new_move_x = curr_pos_x + moves_x[i]\n        new_move_y = curr_pos_y + moves_y[i]\n\n        if (validMove(new_move_x, new_move_y, board)):\n            # contar quantos neighbors estão disponíveis\n            neighbors_available = countNeighbors(new_move_x, new_move_y, moves_x, moves_y, board)\n            if (neighbors_available \u003c neighbors_availability):\n                neighbors_availability = neighbors_available\n                next_move_x = new_move_x\n                next_move_y = new_move_y\n\n    tour += 1\n    board[next_move_x][next_move_y] = tour\n\n    return findNextMove(moves_x, moves_y, next_move_x, next_move_y, tour, board, 8)"}]},{"type":"paragraph","children":[{"text":"O cavalo já tem sua posição inicial e agora ele precisa começar a andar e para encontrar a próxima casa vamos definir temporariamente um "},{"code":true,"text":"new_move"},{"text":" que será um possível movimento válido, a partir deste "},{"code":true,"text":"new_move"},{"text":" vamos contar quantas outras possíveis casa diponíveis ("},{"code":true,"text":"neighbors"},{"text":") existem, o "},{"code":true,"text":"new_move"},{"text":" que tiver o menor número de "},{"code":true,"text":"neighbors"},{"text":" passa a ser o "},{"code":true,"text":"next_move"}]},{"type":"paragraph","children":[{"text":"Precisamos fazer isso até o "},{"text":"Cavalo","italic":true},{"text":" visitar todas as casas, para isso o retorno desta função será ela mesma, tornando-a recursiva. A cada movimento válido que o "},{"text":"Cavalo","italic":true},{"text":" faz estamos adicionando "},{"code":true,"text":"+1"},{"text":" na variável "},{"code":true,"text":"tour"},{"text":", quando o seu total for igual a "},{"code":true,"text":"8 ** 2"},{"text":" (64) que é o total de casas que existem no nosso tabuleiro saberemos que o Tour foi completo"}]},{"type":"paragraph","children":[{"text":"para contar os neighbors faremos o seguinte"}]},{"type":"code-block","children":[{"text":"$python$\ndef countNeighbors(new_move_x, new_move_y, moves_x, moves_y, board):\n    neighbors = 0\n\n    for i in range(8):\n        neighbor_x = new_move_x + moves_x[i]\n        neighbor_y = new_move_y + moves_y[i]\n\n        if (validMove(neighbor_x, neighbor_y, board)):\n            if (validNeighbor(neighbor_x, neighbor_y, new_move_x, new_move_y)):\n                neighbors += 1\n\n    return neighbors"}]},{"type":"paragraph","children":[{"text":"Iteramos por todos os "},{"code":true,"text":"moves"},{"text":" válidos, como estamos manipulando o "},{"code":true,"text":"new_move"},{"text":" que é uma posição temporária apenas para contar quantos "},{"code":true,"text":"neighbors"},{"text":" disponíveis existem não podemos contar a casa que o cavalo realmente está, e esse é o papel do "},{"code":true,"text":"validNeighbor()"}]},{"type":"code-block","children":[{"text":"$python$\ndef validNeighbor(neighbor_x, neighbor_y, new_move_x, new_move_y):\n    if (neighbor_x != new_move_x and neighbor_y != new_move_y):\n        return True \n    return False"}]},{"type":"paragraph","children":[{"text":"Todos os movimentos que passarem são contados e retornados pela função "},{"code":true,"text":"countNeighbors()"},{"text":"."}]},{"type":"paragraph","children":[{"text":"Agora que o "},{"text":"Cavalo","italic":true},{"text":" já passou por todas as 64 casas precisamos printar na tela todo o caminho feito por ele"}]},{"type":"code-block","children":[{"text":"$python$\ndef printBoard(n, board):\n    for i in range(n):\n        for j in range(n):\n            print(board[i][j], end=' ')\n        print()"}]},{"type":"paragraph","children":[{"text":"Para printar tudo isso iteramos pelo "},{"code":true,"text":"board"},{"text":" e para cada elemento do eixo "},{"bold":true,"text":"X"},{"text":" printamos com o parametro "},{"code":true,"text":"end=' '"},{"text":", porquê o python por padrão cria uma nova linha e o resultado que esperamos é que fiquem um ao lado do outro, assim:"}]},{"type":"code-block","children":[{"text":"$jsx$\n5 20 3 26 7 22 31 36 \n2 27 6 21 30 37 8 23 \n19 4 29 50 25 32 35 38 \n28 1 48 33 56 51 24 9 \n45 18 57 62 49 34 39 52 \n60 63 44 47 42 55 10 13 \n17 46 61 58 15 12 53 40 \n64 59 16 43 54 41 14 11 "}]},{"type":"paragraph","children":[{"text":"esse é o caminho feito pelo "},{"text":"Cavalo","italic":true},{"text":" em um tabuleiro de 8x8."}]},{"type":"paragraph","children":[{"text":"você pode acessar o código completo "},{"href":"https://gist.github.com/joaovitorzv/20898d0e9f781a731a111cf3d9ff3615","type":"link","children":[{"text":"neste gist"}],"openInNewTab":false},{"text":""}]},{"type":"paragraph","children":[{"text":""}]}]}},"tags":["Algoritmos","Python","Knight Tour Problem","Chess"]}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"como-resolver-knight-tour-problem"},"buildId":"KZqfJ_7lOZ8v6R1GwVEd2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>