<!DOCTYPE html><html><head><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro&amp;Zen+Antique+Soft&amp;family=IBM+Plex+Mono:wght@400;600&amp;display=swap"/><link rel="icon" href="/assets/blog-icon.ico"/><meta name="google-site-verification" content="BXyBgJEABD-lS0WS6u07BLfhlhHI8sT9TtYOH-VtkYs"/><meta name="google-site-verification" content="v91Ks9t_Nh0XGmwV8GKa5bH-96U4ZKw23VpZajlhi6Y"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:locale" content="pt_BR"/><meta property="og:site_name" content="@joaovitorzv • blog"/><title>Python __mro__</title><meta name="author" content="https://github.com/joaovitorzv"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta property="og:title" content="Python __mro__"/><meta property="og:description" content="Method Resolution Order ou (MRO) é um que atributo define a ordem em que classes são organizadas, para que os métodos sejam procurados e executados."/><meta property="og:url" content="https://joaovitorzv.github.io/post/python-mro"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2022-01-10T03:00:00Z"/><meta property="article:modified_time" content="2022-01-10T03:00:00Z"/><meta property="article:expiration_time" content="2030-12-21T03:00:00Z"/><meta property="article:author" content="https://github.com/joaovitorzv"/><meta property="article:section" content="Technology"/><meta property="article:tag" content="python"/><meta property="article:tag" content="poo"/><meta property="og:image" content="https://media.graphcms.com/resize=width:1920/XsA9wtmBTk20bKV6kxQ8"/><meta property="og:image:alt" content="pilha de pedras e um texto escrito MRO"/><meta property="og:image:width" content="1920"/><meta property="og:image:height" content="1080"/><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/1b5b9f6a270035113f58.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1b5b9f6a270035113f58.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b6b8fe47ef06fe7a681d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b6b8fe47ef06fe7a681d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-90a60b87fd0d5fc150f2.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-62b8caa3ccc47893b147.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9b1cb55190e2254cce63.js" defer=""></script><script src="/_next/static/chunks/879-2ffc48480b5021ed5834.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-a92b3fce5d70a3b64b66.js" defer=""></script><script src="/_next/static/G96HmdF2LoyRNuuM7k1Gl/_buildManifest.js" defer=""></script><script src="/_next/static/G96HmdF2LoyRNuuM7k1Gl/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro&Zen+Antique+Soft&family=IBM+Plex+Mono:wght@400;600&display=swap">@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n5is.woff) format('woff')}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAO8lQ.woff) format('woff')}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeaiXA.woff) format('woff')}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n1iIq131nj-otFQ.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n1isq131nj-otFQ.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n1iAq131nj-otFQ.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n1iEq131nj-otFQ.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F63fjptAgt5VM-kVkqdyU8n1i8q131nj-o.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl1FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAOwlRFgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl9FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAOwl5FgsAXHNlYzg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/ibmplexmono/v11/-F6qfjptAgt5VM-kVkqdyU8n3vAOwlBFgsAXHNk.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXk-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXA-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXc-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXs-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXo-oAGIyY0Wfw.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Source Serif Pro';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/sourceserifpro/v11/neIQzD-0qpwxpaWvjeD0X88SAOeauXQ-oAGIyY0.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="styles_container__1JLFF"><header class="Header_header__cwxka"><div class="Header_headerContent__1ipjG"><h1>() =&gt;  <button class="Header_hideLinksBtn__1mu8E">@joaovitorzv</button> <!-- -->blog.</h1></div><nav id="navigation" class=""><div class="Header_navContent__1ArmW"><div class="Header_links__bOZA0"><a href="/">Home</a><div class="Header_hiddenLink__2SCVW"><a class="Header_link__1GkhW" href="https://www.github.com/joaovitorzv" target="_blank" rel="noopener noreferrer">Github</a><svg fill="#374151" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14px" height="18px"><path d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 12 L 19 12 L 19 19 L 5 19 L 5 5 L 12 5 L 12 3 L 5 3 z M 14 3 L 14 5 L 17.585938 5 L 8.2929688 14.292969 L 9.7070312 15.707031 L 19 6.4140625 L 19 10 L 21 10 L 21 3 L 14 3 z"></path></svg></div><div class="Header_hiddenLink__2SCVW"><a class="Header_link__1GkhW" href="https://www.linkedin.com/in/jo%C3%A3o-vitor-veras-165045186/" target="_blank" rel="noopener noreferrer">LinkedIn</a><svg fill="#374151" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14px" height="18px"><path d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 12 L 19 12 L 19 19 L 5 19 L 5 5 L 12 5 L 12 3 L 5 3 z M 14 3 L 14 5 L 17.585938 5 L 8.2929688 14.292969 L 9.7070312 15.707031 L 19 6.4140625 L 19 10 L 21 10 L 21 3 L 14 3 z"></path></svg></div></div><div><select name="langs"><option selected="" value="all">All languages</option><option value="en-US">English</option><option value="pt-BR">Português</option></select></div></div></nav></header><div class="styles_pageContainer__HYV-w"><div class="styles_page__lKdv7"><section class="Post_postHeader__2HgFk"><div class="Post_postCover__1XkO7"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:66.66666666666666%"></div><img alt="peak of ice mountain" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="peak of ice mountain" sizes="100vw" srcSet="https://media.graphcms.com/resize=width:640/XsA9wtmBTk20bKV6kxQ8 640w, https://media.graphcms.com/resize=width:750/XsA9wtmBTk20bKV6kxQ8 750w, https://media.graphcms.com/resize=width:828/XsA9wtmBTk20bKV6kxQ8 828w, https://media.graphcms.com/resize=width:1080/XsA9wtmBTk20bKV6kxQ8 1080w, https://media.graphcms.com/resize=width:1200/XsA9wtmBTk20bKV6kxQ8 1200w, https://media.graphcms.com/resize=width:1920/XsA9wtmBTk20bKV6kxQ8 1920w, https://media.graphcms.com/resize=width:2048/XsA9wtmBTk20bKV6kxQ8 2048w, https://media.graphcms.com/resize=width:3840/XsA9wtmBTk20bKV6kxQ8 3840w" src="https://media.graphcms.com/resize=width:3840/XsA9wtmBTk20bKV6kxQ8" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><h2>Python __mro__</h2><span>10 de janeiro de 2022</span></section><article id="keep-reading" class="Post_content__3OniL"><p>Method Resolution Order ou (MRO) é um que atributo define a ordem em que classes são organizadas, para que os métodos sejam procurados e executados. Em linguagens que não permitem herdar múltiplas classes o MRO não é tão necessário, mas nas que permitem (como Python) ele tem um papel importante.</p><p>Quando herdamos uma classe a classe herdada pode ser chamada de Parent ou Superclass e a classe que esta herdando Child ou Subclass, o papel do MRO é definir a ordem das Superclasses em que, será procurado por (e caso encontrado, executado) algum método.</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">class Grandparent():
    def method(self):
        return &#x27;grandparent&#x27;

class Parent(Grandparent):
    def method(self):
        return &#x27;parent&#x27;

class Child(Parent):
    pass

child = Child()

print(child.method()) # &gt; &#x27;parent&#x27;</code></pre><p>um exemplo bem simples (sem fazer o uso de múltiplas heranças) é o código acima, temos 3 classes que possuem o mesmo método, o MRO primeiro procura pelo método na classe instanciada que estamos e caso não seja encontrado procura nas Superclasses, dessa forma: Child -&gt; Parent -&gt; Grandparent.</p><p>é possível visualizar essa ordem acessando o <code class="inlineHighlight">__mro__</code> na classe Child</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">child = Child()

# (&lt;class &#x27;__main__.Child&#x27;&gt;, &lt;class &#x27;__main__.Parent&#x27;&gt;, &lt;class &#x27;__main__.Grandparent&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</code></pre><blockquote class="quote"><h3>python object class</h3><p>podemos ver uma classe que não criamos no final <code class="inlineHighlight">&lt;class &#x27;object&#x27;&gt;</code>. essa é uma classe built-in do python, ela está presente para ser a Superclass de classes que não tenham explicitamente definido classes para herdar. Por isso a vimos no final do <code class="inlineHighlight">__mro__</code> pois a classe Grandparent não herda nenhuma outra classe.</p></blockquote><p>agora utilizando múltiplas heranças vamos ver o MRO cumprindo o seu papel.</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">class Grandparent():
    def method(self):
        return &#x27;grandparent&#x27;

class Parent(Grandparent):
    def method(self):
        return &#x27;parent&#x27;

class Parent2(Grandparent):
    def method(self):
        return &#x27;parent2&#x27;

class Child(Parent, Parent2):
    pass

child = Child()

print(child.method()) # &gt; &#x27;parent&#x27;
print(Child.__mro__)
# (&lt;class &#x27;__main__.Child&#x27;&gt;, &lt;class &#x27;__main__.Parent&#x27;&gt;, &lt;class &#x27;__main__.Parent2&#x27;&gt;, &lt;class &#x27;__main__.Grandparent&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</code></pre><p>como você pode na classe child temos o controle da ordem em que as Superclasses serão posicionadas <code class="inlineHighlight">Child(Parent, Parent2)</code></p><blockquote class="quote"><p>essa ordem fica disponível no atributo <code class="inlineHighlight">__bases__</code> de sua respectiva classe, por exemplo a classe Child acima:</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">print(Child.__bases__)
# (&lt;class &#x27;__main__.Parent&#x27;&gt;, &lt;class &#x27;__main__.Parent2&#x27;&gt;)</code></pre></blockquote><p>no exemplo do código acima já começa a ficar interessante, pois o esperado seria que o código tivesse o seguinte MRO</p><p><code class="inlineHighlight">Child -&gt; Parent -&gt; Grandparent -&gt; Parent2 -&gt; Grandparent</code></p><p>mas isso não acontece porque como estamos lidando com herança a precedência importa, isso é, a classe <code class="inlineHighlight">Parent2</code> tem prioridade sobre a <code class="inlineHighlight">Grandparent</code>, então o MRO define a seguinte ordem</p><p><code class="inlineHighlight">Child -&gt; Parent -&gt; Parent2 -&gt; GrandParent</code></p><p>então podemos concluir que Subclasses precedem Superclasses (como já dito ali em cima Subclasses, Superclasses = Child, Parent) e o nosso MRO se baseia na ordem do atributo <code class="inlineHighlight">__bases__</code></p><h3>Exemplo 2</h3><p>Se por acaso você tentar criar uma ordem que o MRO não consiga resolver você recebera um TypeError:</p><p><i>&quot;TypeError: Cannot create a consistent method resolution
order (MRO) for bases&quot;</i></p><div class="img"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTY5IiBoZWlnaHQ9IjM0MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img srcSet="https://media.graphcms.com/resize=width:640/j5xTS0cqQIqy2WZzB5X0 1x, https://media.graphcms.com/resize=width:1200/j5xTS0cqQIqy2WZzB5X0 2x" src="https://media.graphcms.com/resize=width:1200/j5xTS0cqQIqy2WZzB5X0" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><p>no código acima não é possivel criar um Method Resolution Order consistente porque estamos tentando passar uma Superclass na frente de uma Subclass.</p><div class="img"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTY5IiBoZWlnaHQ9IjM0MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img srcSet="https://media.graphcms.com/resize=width:640/BzOYLClTWrI1e5aAUMwH 1x, https://media.graphcms.com/resize=width:1200/BzOYLClTWrI1e5aAUMwH 2x" src="https://media.graphcms.com/resize=width:1200/BzOYLClTWrI1e5aAUMwH" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></div></div><p>um workaround para esse erro seria invertendo o <code class="inlineHighlight">__bases__</code> da classe Child <code class="inlineHighlight">Child(Parent3, Parent)</code>, por mais que funcione existe uma maneira melhor de resolver isso e que vai deixar o seu MRO mais organizado e bem definido e você não terá erros inesperados no futuro.
</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">class Grandparent():
    def method(self):
        return &#x27;grandparent&#x27;

class Parent():
    def method(self):
        return &#x27;parent&#x27;

    def parent(self):
        return &#x27;parent hierarquicamente&#x27;

class Parent2(Parent, Grandparent):
    def method(self):
        return &#x27;parent2&#x27;

class Parent3(Parent2):
    pass

class Child(Parent3):
    pass

child = Child()

print(child.parent()) # parent hierarquicamente</code></pre><p>como temos a acesso a todos os métodos e atributos por hierarquia podemos remover a classe <code class="inlineHighlight">Parent</code> da classe <code class="inlineHighlight">Child</code>.</p><pre class="blockHighlight" style="font-size:14px"><code class="language-python">print(Child.__mro__)
# (&lt;class &#x27;__main__.Child&#x27;&gt;, &lt;class &#x27;__main__.Parent3&#x27;&gt;, &lt;class &#x27;__main__.Parent2&#x27;&gt;, &lt;class &#x27;__main__.Parent&#x27;&gt;, &lt;class &#x27;__main__.Grandparent&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</code></pre><p>Acima podemos ver como ficou o MRO, bem definido e não trara problemas no futuro.</p></article><div class="Post_postFooter__22Xrw"><a href="/">Voltar</a></div></div></div><footer class="Footer_footer__3zUfD"><p>© <span>new Date().getFullYear() </span> by João Vitor Veras O.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"__typename":"Post","title":"Python __mro__","slug":"python-mro","language":"pt-BR","description":"Method Resolution Order ou (MRO) é um que atributo define a ordem em que classes são organizadas, para que os métodos sejam procurados e executados.","date":"2022-01-10","coverImage":{"__typename":"Asset","url":"https://media.graphassets.com/XsA9wtmBTk20bKV6kxQ8","width":5760,"height":3840,"handle":"XsA9wtmBTk20bKV6kxQ8"},"coverImageAlt":"pilha de pedras e um texto escrito MRO","content":{"__typename":"RichText","raw":{"children":[{"type":"paragraph","children":[{"text":"Method Resolution Order ou (MRO) é um que atributo define a ordem em que classes são organizadas, para que os métodos sejam procurados e executados. Em linguagens que não permitem herdar múltiplas classes o MRO não é tão necessário, mas nas que permitem (como Python) ele tem um papel importante."}]},{"type":"paragraph","children":[{"text":"Quando herdamos uma classe a classe herdada pode ser chamada de Parent ou Superclass e a classe que esta herdando Child ou Subclass, o papel do MRO é definir a ordem das Superclasses em que, será procurado por (e caso encontrado, executado) algum método."}]},{"type":"code-block","children":[{"text":"$python$\nclass Grandparent():\n    def method(self):\n        return 'grandparent'\n\nclass Parent(Grandparent):\n    def method(self):\n        return 'parent'\n\nclass Child(Parent):\n    pass\n\nchild = Child()\n\nprint(child.method()) # \u003e 'parent'"}]},{"type":"paragraph","children":[{"text":"um exemplo bem simples (sem fazer o uso de múltiplas heranças) é o código acima, temos 3 classes que possuem o mesmo método, o MRO primeiro procura pelo método na classe instanciada que estamos e caso não seja encontrado procura nas Superclasses, dessa forma: Child -\u003e Parent -\u003e Grandparent."}]},{"type":"paragraph","children":[{"text":"é possível visualizar essa ordem acessando o "},{"code":true,"text":"__mro__"},{"text":" na classe Child"}]},{"type":"code-block","children":[{"text":"$python$\nchild = Child()\n\n# (\u003cclass '__main__.Child'\u003e, \u003cclass '__main__.Parent'\u003e, \u003cclass '__main__.Grandparent'\u003e, \u003cclass 'object'\u003e)"}]},{"type":"block-quote","children":[{"type":"heading-three","children":[{"text":"python object class"}]},{"type":"paragraph","children":[{"text":"podemos ver uma classe que não criamos no final "},{"code":true,"text":"\u003cclass 'object'\u003e"},{"text":". essa é uma classe built-in do python, ela está presente para ser a Superclass de classes que não tenham explicitamente definido classes para herdar. Por isso a vimos no final do "},{"code":true,"text":"__mro__"},{"text":" pois a classe Grandparent não herda nenhuma outra classe."}]}]},{"type":"paragraph","children":[{"text":"agora utilizando múltiplas heranças vamos ver o MRO cumprindo o seu papel."}]},{"type":"code-block","children":[{"text":"$python$\nclass Grandparent():\n    def method(self):\n        return 'grandparent'\n\nclass Parent(Grandparent):\n    def method(self):\n        return 'parent'\n\nclass Parent2(Grandparent):\n    def method(self):\n        return 'parent2'\n\nclass Child(Parent, Parent2):\n    pass\n\nchild = Child()\n\nprint(child.method()) # \u003e 'parent'\nprint(Child.__mro__)\n# (\u003cclass '__main__.Child'\u003e, \u003cclass '__main__.Parent'\u003e, \u003cclass '__main__.Parent2'\u003e, \u003cclass '__main__.Grandparent'\u003e, \u003cclass 'object'\u003e)"}]},{"type":"paragraph","children":[{"text":"como você pode na classe child temos o controle da ordem em que as Superclasses serão posicionadas "},{"code":true,"text":"Child(Parent, Parent2)"}]},{"type":"block-quote","children":[{"type":"paragraph","children":[{"text":"essa ordem fica disponível no atributo "},{"code":true,"text":"__bases__"},{"text":" de sua respectiva classe, por exemplo a classe Child acima:"}]},{"type":"code-block","children":[{"text":"$python$\nprint(Child.__bases__)\n# (\u003cclass '__main__.Parent'\u003e, \u003cclass '__main__.Parent2'\u003e)"}]}]},{"type":"paragraph","children":[{"text":"no exemplo do código acima já começa a ficar interessante, pois o esperado seria que o código tivesse o seguinte MRO"}]},{"type":"paragraph","children":[{"code":true,"text":"Child -\u003e Parent -\u003e Grandparent -\u003e Parent2 -\u003e Grandparent"}]},{"type":"paragraph","children":[{"text":"mas isso não acontece porque como estamos lidando com herança a precedência importa, isso é, a classe "},{"code":true,"text":"Parent2"},{"text":" tem prioridade sobre a "},{"code":true,"text":"Grandparent"},{"text":", então o MRO define a seguinte ordem"}]},{"type":"paragraph","children":[{"code":true,"text":"Child -\u003e Parent -\u003e Parent2 -\u003e GrandParent"}]},{"type":"paragraph","children":[{"text":"então podemos concluir que Subclasses precedem Superclasses (como já dito ali em cima Subclasses, Superclasses = Child, Parent) e o nosso MRO se baseia na ordem do atributo "},{"code":true,"text":"__bases__"}]},{"type":"heading-three","children":[{"text":"Exemplo 2"}]},{"type":"paragraph","children":[{"text":"Se por acaso você tentar criar uma ordem que o MRO não consiga resolver você recebera um TypeError:"}]},{"type":"paragraph","children":[{"text":"\"TypeError: Cannot create a consistent method resolution\norder (MRO) for bases\"","italic":true}]},{"src":"https://media.graphcms.com/j5xTS0cqQIqy2WZzB5X0","type":"image","title":"mro-error.png","width":569,"handle":"j5xTS0cqQIqy2WZzB5X0","height":341,"children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"no código acima não é possivel criar um Method Resolution Order consistente porque estamos tentando passar uma Superclass na frente de uma Subclass."}]},{"src":"https://media.graphcms.com/BzOYLClTWrI1e5aAUMwH","type":"image","title":"mro-inconsistent.png","width":569,"handle":"BzOYLClTWrI1e5aAUMwH","height":341,"children":[{"text":""}],"mimeType":"image/png"},{"type":"paragraph","children":[{"text":"um workaround para esse erro seria invertendo o "},{"code":true,"text":"__bases__"},{"text":" da classe Child "},{"code":true,"text":"Child(Parent3, Parent)"},{"text":", por mais que funcione existe uma maneira melhor de resolver isso e que vai deixar o seu MRO mais organizado e bem definido e você não terá erros inesperados no futuro.\n"}]},{"type":"code-block","children":[{"text":"$python$\nclass Grandparent():\n    def method(self):\n        return 'grandparent'\n\nclass Parent():\n    def method(self):\n        return 'parent'\n\n    def parent(self):\n        return 'parent hierarquicamente'\n\nclass Parent2(Parent, Grandparent):\n    def method(self):\n        return 'parent2'\n\nclass Parent3(Parent2):\n    pass\n\nclass Child(Parent3):\n    pass\n\nchild = Child()\n\nprint(child.parent()) # parent hierarquicamente"}]},{"type":"paragraph","children":[{"text":"como temos a acesso a todos os métodos e atributos por hierarquia podemos remover a classe "},{"code":true,"text":"Parent"},{"text":" da classe "},{"code":true,"text":"Child"},{"text":"."}]},{"type":"code-block","children":[{"text":"$python$\nprint(Child.__mro__)\n# (\u003cclass '__main__.Child'\u003e, \u003cclass '__main__.Parent3'\u003e, \u003cclass '__main__.Parent2'\u003e, \u003cclass '__main__.Parent'\u003e, \u003cclass '__main__.Grandparent'\u003e, \u003cclass 'object'\u003e)"}]},{"type":"paragraph","children":[{"text":"Acima podemos ver como ficou o MRO, bem definido e não trara problemas no futuro."}]}]}},"tags":["python","poo"]}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"python-mro"},"buildId":"G96HmdF2LoyRNuuM7k1Gl","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>